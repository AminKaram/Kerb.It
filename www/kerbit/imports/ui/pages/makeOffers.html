<template name="MakeOffers">
    {{#OnlyDriver}}
        {{>MakeOffersHelper}}
    {{/OnlyDriver}}
</template>

<template name="MakeOffersHelper">

    <div id="map-london-container">
        {{> googleMap name="map" options=mapOptions}}
    </div>

    <!-- Modal Structure -->
    <div id="modal1" class="modal bottom-sheet">
    <div class="modal-content">
        <h4>Requests in {{getArea}} : ({{getNum getArea}})</h4>
    <ul class="collapsible" data-collapsible="accordion">
        {{#each requests getArea}}
            {{#with items itemId}}
                {{#each images imageIds}}
                    <li>
                        <div class="collapsible-header">
                    <li class="collection-item avatar">
                        <div class="col s1">
                            <img src="{{this.url store='images'}}" alt="" class="square responsive-img
          valign profile-image">
                        </div>
                        <span class="title">{{../description}}</span>
                        <p> Placeholder<br>
                            Something Else
                        </p>

                    </li>

                </div>
                    <div class="collapsible-body">
                        {{#if hasAlreadyMadeOffer ../../_id}}
                            <h2>You have already made an offer of £{{getOfferPrice ../../_id}} on this item !</h2>
                            <p> If you wish to lower your offer, you can update your offer up to the end of the bid window</p>
                        <br>
                            <div class="col s10">
                                <form class="update">
                                    <div class="row">
                                        <div class="input-field col s8" style="top: -28px;">
                                            <input type="text" name="id" id="id" value="{{getOfferId ../../_id}}" hidden>
                                            <input type="text" name="price" onfocus="document.getElementById('price').placeholder = '£';">
                                            <label for="price">Price</label>
                                        </div>
                                        <div class="col s4">
                                            <button type="update" class="btn">Update
                                                Price</button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        {{else}}
                            <form class="input">
                                <div class="input-field">
                                    <label for="price">Price</label>
                                    <input id="price" type="text" name="price"
                                           onfocus="document.getElementById('price').placeholder = '£';">
                                </div>

                                <input class="with-gap" name="requestId" type="radio" id={{../../_id}} i
                                       value={{../../_id}}>
                                <label for={{../../_id}}>
                                </label>
                                <button type="submit" class="btn">Make Offer</button>
                            </form>
                        {{/if}}

                    </div>
                    </li>
                {{/each}}
            {{/with}}
        {{/each}}
        </ul>

    </div>
    <div class="modal-footer">
        <a href="#!" class=" modal-action modal-close waves-effect waves-green btn-flat">Back to Map</a>
    </div>
    </div>


</template>

