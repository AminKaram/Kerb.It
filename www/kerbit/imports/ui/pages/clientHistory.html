<template name="ClientHistory">
  {{#OnlyConsumer}}
    {{>ClientHistoryHelper }}
  {{/OnlyConsumer}}
</template>

<template name="ClientHistoryHelper">
  <div class="text-center h1"> My Recent Transactions </div>
    <div class="container">
      <div class="row">
        <ul class="list-group">
          {{#each transactions}}
            <li class ="list-group-item">
              {{>Transaction}}{{> starsRating id='rating' mutable=true}}
              <button class="btn btn-default" onclick="getRating()">Rate this transaction</button>
            </li>
          {{/each}}
        </ul>
      </div>
    </div>

    <script>
        function getRating() {
            var rating = $('#rating').data('userrating');
            Meteor.call('rateDriver', Meteor.userId(), rating);
        }
    </script>
</template>

