<template name="ClientHistory">
  {{#OnlyConsumer}}
    {{>ClientHistoryHelper }}
  {{/OnlyConsumer}}
</template>

<template name="ClientHistoryHelper">
  <h3> You have {this many} jobs waiting for collection</h3>
    <table class="table table-hover">
  <thead>
    <tr>
      <th>Order ID</th>
      <th>Driver</th>
      <th>Location</th>
      <th>Collected?</th>
    </tr>
  </thead>
  <tbody>
  {{#each pending}}
    <tr>
      <th scope="row">{{_id}}</th>
      <td><img src="https://randomuser.me/api/portraits/men/8.jpg" style="width:35px;height:30px;">{{getDriverName}}</td>
      <td>{{formatPostcode postcode}}</td>
      <td><button class="btn btn-default btn-success collect">Collected</button></td>
    </tr>
    {{/each}}

  </tbody>
</table>

    <h3> Your last five completed jobs :</h3>
    <table class="table table-hover">
        <thead>
        <tr>
            <th>Order ID</th>
            <th>Driver</th>
            <th>Location</th>
            <th>Feedback</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <th scope="row">1</th>
            <td>Mark</td>
            <td>Otto</td>
            <td>@mdo</td>
        </tr>
        <tr>
            <th scope="row">2</th>
            <td>Jacob</td>
            <td>Thornton</td>
            <td>@fat</td>
        </tr>
        <tr>
            <th scope="row">3</th>
            <td colspan="2">Larry the Bird</td>
            <td>@twitter</td>
        </tr>
        </tbody>
    </table>

  <div class="text-center h1"> My Recent Transactions </div>
    <div class="container">
      <div class="row">
        <ul class="list-group">
          {{#each transactions}}
            <li class ="list-group-item">
              {{>Transaction}}{{> starsRating id='rating' mutable=true}}
              <button class="btn btn-default ratingButton">Rate this transaction</button>
            </li>
          {{/each}}
        </ul>
      </div>
    </div>
</template>

