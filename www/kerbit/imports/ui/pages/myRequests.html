<template name="MyRequests">
  {{#OnlyConsumer}}
    {{>MyRequestsHelper}}
  {{/OnlyConsumer}}
</template>

<template name="MyRequestsHelper">
  <div class="text-center h1">My requests
    <div class="btn-group" role="group" aria-label="Basic example">
      <button class="btn btn-success refresh-requests"><i class="fa fa-refresh fa-fw"></i> Refresh</button>
      <button id="delete-all-requests" class="btn btn-danger "><i class="fa fa-trash fa-fw"></i> Delete all</button>
    </div>
  </div>
  <hr>
  <div class="container">
    <div class="row">
      {{#each currentUsersRequests}}
      <div class="col s6">
        <div class="card">
          {{#each ItemWithId itemId}}
            {{#each ImageWithIds imageIds}}
              <div class="card-image">
                <img src="{{url store='images'}}" alt="" class="responsive-img" />
                <span class="card-title">{{formatDate ../../createdAt}}</span>
              </div>
            {{/each}}
          {{/each}}
          <div class="card-content">
            <ul class="collection">
              {{#each ItemWithId itemId}}
                <li class="collection-item">
                  <span class="text-info">Description:</span> 
                  &nbsp;&nbsp;{{formatDescription description}}
                </li>
              {{/each}}
              <li class="collection-item">
                <span class="text-info">Offers:</span><br>
                <ul class="list-group">
                  {{#each offersWithRequestId _id}}
                    <li class="list-group-item">
                      Offer: {{price}} <button id="accept-offer" class="btn btn-default btn-success ">Accept Offer</button>
                    </li>
                  {{/each}}
                </ul>
              </li>
            </ul>
          </div>
          <div class="card-action">
            <button type="button" id="delete-request" class="list-group-item list-group-item-danger "><i class="fa fa-trash fa-fw"></i> Delete this request</button>
          </div>
        </div>
      </div>
      {{/each}}
    </div>
  </div>
</template>
