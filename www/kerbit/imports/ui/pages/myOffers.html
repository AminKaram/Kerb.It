<template name="MyOffers">
  {{#OnlyDriver}}
    {{>MyOffersHelper}}
  {{/OnlyDriver}}
</template>

<template name="MyOffersHelper">
  <div class="text-center h1"> My Offers </div>

  <hr>
  <div class="tabs">
    <ul class="tab-links">
      <li><button class="btn btn-link" name ="#tab1">Pending Offers</button></li>
      <li class="active"><button class="btn btn-link" name= "#tab2">Accepted Offers</button></li>
    </ul>

    <div class="tab-content">
      <div id="tab1" class="tab">
        <div class="container">
          <div class="row">
            {{#each offers}}
              <ul>
                {{#each requests requestId}}
                  <li>
                    Request: {{description}} {{../price}}
                    <form>
                      <input type="text" name="id" id="id" value="{{../_id}}" hidden>
                      <input type="text" name="price" id="price" placeholder="Price">
                      <input type="submit" id="submit-update" class="btn btn-default btn-success " value="Update Offer">
                    </form>
                  </li>
                {{/each}}
              </ul>
            {{/each}}
          </div>
        </div>
      </div>

      <div id="tab2" class="tab active">
        {{#each transactions}}
          <li class="list-group-item">
            <ul class="list-group custom-border">
              <li class ="list-group-item">
                {{#each images imageIds}}
                  <div class="container">
                    <div class="col-md-2" style="padding-left: 0px;  padding-right: 0px;">
                      <a href="{{this.url}}" target="_blank"><img src="{{this.url store='images'}}" alt="" class="img-rounded img-responsive" /></a>
                    </div>
                  </div>
                {{/each}}
              </li>
              <li class ="list-group-item">
                <span class="text-info">Description:</span> &nbsp;&nbsp;{{formatDescription description}}
              </li>
              <li class ="list-group-item">
                <span class="text-info">Date accepted:</span> {{formatDate dateCollected }}
              </li>
              <li class ="list-group-item">
                <span class="text-info">Price:</span> {{price}}<br>
              </li>
            </ul>
          </li>
        {{/each}}
        <div id="map-container">
          {{> map}}
        </div>
      </div>
    </div>
  </div>
</template>
